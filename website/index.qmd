---
title: "ê¹€ì¹˜ ê¸ˆ í”„ë¦¬ë¯¸ì—„ ëŒ€ì‹œë³´ë“œ ğŸ’°ğŸ“ˆ"
format:
  html:
    code-fold: true
jupyter: python3
---

ì´ ëŒ€ì‹œë³´ë“œëŠ” êµ­ì œ ê¸ˆ ì‹œì„¸ì™€ ë¹„êµí•œ êµ­ë‚´ ê¸ˆ ì‹œì„¸ì˜ "ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„"ì„ ì¶”ì í•©ë‹ˆë‹¤.
ë°ì´í„°ëŠ” ë§¤ì¼ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

```{python}
#| label: load-data
#| warning: false

import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from pathlib import Path

# ë°ì´í„° ë¡œë“œ
data_path = Path("../data/kimchi_gold_price_log.csv")
df = pd.read_csv(data_path)
df['ë‚ ì§œ'] = pd.to_datetime(df['ë‚ ì§œ'])

# êµ­ì œ ê¸ˆ ì‹œì„¸ë¥¼ KRW/gìœ¼ë¡œ ê³„ì‚°
# 1 Troy Ounce = 31.1034768 grams
df['International_KRW_g'] = df['êµ­ì œê¸ˆ(ë‹¬ëŸ¬/ì˜¨ìŠ¤)'] * (1 / 31.1035) * df['í™˜ìœ¨(ì›/ë‹¬ëŸ¬)']
```

## 1. ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ í…Œì´ë¸” (ìµœê·¼ 30ì¼) ğŸ“…

ìµœê·¼ ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ ë° ê¸ˆ ì‹œì„¸ ë³€ë™ í˜„í™©ì…ë‹ˆë‹¤.

```{python}
#| label: premium-table

# í…Œì´ë¸” ë°ì´í„° ì¤€ë¹„ (ìµœê·¼ 30ì¼, ìµœì‹ ìˆœ)
table_df = df.tail(30).iloc[::-1][['ë‚ ì§œ', 'ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„(%)', 'êµ­ë‚´ê¸ˆ(ì›/g)', 'International_KRW_g']].copy()
table_df['ë‚ ì§œ'] = table_df['ë‚ ì§œ'].dt.strftime('%Y-%m-%d')
table_df.columns = ['ë‚ ì§œ', 'í”„ë¦¬ë¯¸ì—„ (%)', 'êµ­ë‚´ ê¸ˆ (ì›/g)', 'êµ­ì œ ê¸ˆ (ì›/g)']

# í…Œì´ë¸” í‘œì‹œ
table_df
```

## 2. ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ (%) ğŸ“Š

êµ­ë‚´ ê¸ˆ ê°€ê²©ê³¼ êµ­ì œ ê¸ˆ ê°€ê²©ì˜ ë°±ë¶„ìœ¨ ì°¨ì´ì…ë‹ˆë‹¤.

```{python}
#| label: plot-premium

fig1 = go.Figure()
fig1.add_trace(go.Scatter(
    x=df['ë‚ ì§œ'], 
    y=df['ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„(%)'],
    mode='lines',
    name='ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ (%)',
    line=dict(color='red')
))

fig1.update_layout(
    title='ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ (%) ì¶”ì´',
    xaxis_title='ë‚ ì§œ',
    yaxis_title='í”„ë¦¬ë¯¸ì—„ (%)',
    hovermode='x unified'
)
fig1.show()
```

## 3. êµ­ë‚´ vs êµ­ì œ ê¸ˆ ì‹œì„¸ ë¹„êµ âš–ï¸

êµ­ë‚´ ê¸ˆ ì‹œì„¸(ì›/g)ì™€ ì›í™”ë¡œ í™˜ì‚°ëœ êµ­ì œ ê¸ˆ ì‹œì„¸ì˜ ë¹„êµì…ë‹ˆë‹¤.

```{python}
#| label: plot-price-comparison

fig2 = go.Figure()
fig2.add_trace(go.Scatter(
    x=df['ë‚ ì§œ'], 
    y=df['êµ­ë‚´ê¸ˆ(ì›/g)'], 
    mode='lines', 
    name='êµ­ë‚´ ê¸ˆ (ì›/g)'
))
fig2.add_trace(go.Scatter(
    x=df['ë‚ ì§œ'], 
    y=df['International_KRW_g'], 
    mode='lines', 
    name='êµ­ì œ ê¸ˆ (ì›/g, í™˜ìœ¨ ë°˜ì˜)'
))

fig2.update_layout(
    title='êµ­ë‚´ vs êµ­ì œ ê¸ˆ ì‹œì„¸',
    xaxis_title='ë‚ ì§œ',
    yaxis_title='ê°€ê²© (ì›/g)',
    hovermode='x unified'
)
fig2.show()
```

## 4. í™˜ìœ¨ (ì›/ë‹¬ëŸ¬) ğŸ’µ

ì›/ë‹¬ëŸ¬ í™˜ìœ¨ ì¶”ì´ì…ë‹ˆë‹¤.

```{python}
#| label: plot-exchange-rate

fig3 = go.Figure()
fig3.add_trace(go.Scatter(
    x=df['ë‚ ì§œ'], 
    y=df['í™˜ìœ¨(ì›/ë‹¬ëŸ¬)'],
    mode='lines',
    name='í™˜ìœ¨',
    line=dict(color='purple')
))

fig3.update_layout(
    title='ì›/ë‹¬ëŸ¬ í™˜ìœ¨',
    xaxis_title='ë‚ ì§œ',
    yaxis_title='ì›/ë‹¬ëŸ¬',
    hovermode='x unified'
)
fig3.show()
```

<br>
<small>ë°ì´í„° ì¶œì²˜: `data/kimchi_gold_price_log.csv`</small>
